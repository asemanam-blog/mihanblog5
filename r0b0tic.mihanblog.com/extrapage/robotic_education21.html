
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc@rsd" />
<script type="text/javascript" src="../../static.mihanblog.com/public/scripts/run/g.other.v3.js"></script>
<script>

	function c_$(id){
        return document.getElementById(id);
    }
    
			//if (parent.frames.length) top.location.href= document.location;
		
	setTodayDate = function(){
		document.write('شنبه 22 آذر 1399');
		/*354406*/	}

</script>



        <script type="text/javascript">
            (function(){
            var now = new Date();
            var head = document.getElementsByTagName('head')[0];
            var script = document.createElement('script');
            script.async = true;
            var script_address = 'https://cdn.yektanet.com/js/mihanblog.com/native-mihanblog.com-6531.js';
            script.src = script_address + '?v=' + now.getFullYear().toString() + '0' + now.getMonth() + '0' + now.getDate() + '0' + now.getHours();
            head.appendChild(script);
            })();
        </script>

        <!--<script type="text/javascript">
            var head = document.getElementsByTagName("head")[0];
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.async=1;
            script.src = "https://s1.mediaad.org/serve/mihanblog.com/loader.js" ;
            head.appendChild(script);
        </script>-->
        
        <script>
            var sabaVisionWebsiteID = "9bab9dac-041d-4bdb-b39a-1ed789f65eed"; var sabaVisionWebsitePage = "ALL"
        </script>
        <link rel="stylesheet" href="https://plus.sabavision.com/dox/dox.min.css">
        <script src="https://plus.sabavision.com/dox/dox.min.js"></script>
        
        <script>
	try{
		var commentCnt = new Array();
			} catch(e){}
	
	newComment = function(post_id){
		try{
			window.open('/post/comment/'+post_id,'comment','status=yes,scrollbars=yes,toolbar=no,menubar=no,location=no ,width=480px,height=540px');
		} catch(e){}
	}
	setCommentCnt = function(post_id){
		try{
			if(commentCnt[post_id]){
				document.write(commentCnt[post_id]);
			} else {
				document.write(0);
			}
		} catch(e){}
	}
</script><script>

	statInfo = new Array();
	setStatVar = function(index,value){
		statInfo[index] = value;
	}
	getStatVar = function(index){
		if(statInfo[index]) document.write(statInfo[index]);
	}
	
	setStatVar('total_post','245');
	setStatVar('total_author','2');
	setStatVar('modify_date','دوشنبه 4 آذر 1392');
	
	setStatVar('today_view','31');
	setStatVar('yesterday_view','56');
	
	setStatVar('this_month_view','1352');
	setStatVar('last_month_view','3293');

	setStatVar('total_view','916055');
	setStatVar('last_view_date','شنبه 22 آذر 1399 (14:50)');



    
</script><script>
	messageForm = function(post_id){
		try{
			window.open('/message','message','status=yes,scrollbars=yes,toolbar=no,menubar=no,location=no ,width=480px,height=550px');
		} catch(e){}
	}
</script><script>
	linkdailyForm = function(){
		try{
			window.open('/linkdaily/new','linkdaily','status=yes,scrollbars=yes,toolbar=no,menubar=no,location=no ,width=500px,height=460px');
		} catch(e){}
	}
</script><script>

var MihanblogShopAdsArray = new Array();

function GetMihanBlogShowAds(){
	if(MihanblogShopAdsArray.length){
		var adsTarget = 'MihanblogShopAds';
		var containerWidth = document.getElementById(adsTarget).offsetWidth;
		if(containerWidth>=200){
			var adsCnt = parseInt(containerWidth / 200) ;
			if(adsCnt>MihanblogShopAdsArray.length){
				adsCnt = MihanblogShopAdsArray.length ; 
			}
//			var OneAdsWidth = parseInt(containerWidth / adsCnt) ;
			var OneAdsWidth = containerWidth / adsCnt ;
			if(OneAdsWidth>400){
				OneAdsWidth = 400 ;
			}
			var OutHtml = '';
			var img = '';
			var link = '';
			var title = '';
			var description = '';
			var imgWidth = 70;
			if(OneAdsWidth>230){
				imgWidth = 80;
			}
			if(OneAdsWidth>300){
				imgWidth = 90;
			}
			for(adsOne=0;adsOne<adsCnt;adsOne++){
				
				img = MihanblogShopAdsArray[adsOne]['img'];
				link = MihanblogShopAdsArray[adsOne]['link'];
				title = MihanblogShopAdsArray[adsOne]['title'];
				description = MihanblogShopAdsArray[adsOne]['description'];
				
				OutHtml += '<td style="background-color:#FFF;width: '+OneAdsWidth+'px;border:1px solid #f00;margin:0px 0px;font-size:11px;font-family:tahoma;padding:2px;margin:0px 0px;font-size:11px;border: 1px solid BurlyWood; padding: 1px; height: '+(imgWidth+25)+'px;">';

				OutHtml += '	<a href="http://r0b0tic.mihanblog.com/extrapage/'+link+'" target="_blank" style="text-decoration:none">';

				OutHtml += '			<div style="width: '+(OneAdsWidth-16)+'px;cursor:pointer;font-size:12px;padding: 4px 1px 4px 7px; white-space: nowrap; text-align: center; font-weight: bold; color: blue;white-space:nowrap;overflow:hidden">';
				OutHtml += 					title;
				OutHtml += '			</div>';
				OutHtml += '			<div style="cursor:pointer;padding: 1px; display: block; float: right; width: '+imgWidth+'px;">';
				OutHtml += '				<img src="'+img+'.html" style="border:0px;padding:0px;margin:0px;width:'+imgWidth+'px;height:'+imgWidth+'px;">';
				OutHtml += '			</div>';
				OutHtml += '			<div style="padding: 1px; display: block; float: right; width: '+(OneAdsWidth-13-imgWidth)+'px; text-align: right;overflow:hidden">';
				OutHtml += '				<div style="overflow:hidden;cursor:pointer;padding: 2px 3px; line-height: 17px; height: '+(imgWidth-3)+'px; text-align: justify;color:#000;direction:rtl">';
				OutHtml += 						description;
				OutHtml += '				</div>';
				OutHtml += '			</div>';

				OutHtml += '	</a>';

				OutHtml += '</td>';
			}
			
			var Out = '<table align="center" cellpadding="0" cellspacing="2" style="width:'+(OneAdsWidth*adsCnt)+'px;"><tr>'+OutHtml+'</tr></table>'; 
			
			Out = '<div style="text-align:center;padding:0px;margin:3px auto;">'+Out+'</div>'; 
			
			document.getElementById(adsTarget).style.height = (imgWidth+35)+'px' ;
			document.getElementById(adsTarget).innerHTML = Out ;
		}
	}
}
</script>
    <style>
        @font-face {
            font-family: 'Mihan-Iransans';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-IransansBold';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-IransansLight';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-Nassim';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-Koodak';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-Yekan';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'FontAwesome';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }


        

        /* Smartphones (portrait and landscape) ----------- */

        /*
        @media only screen and (max-width : 480px) and (min-width : 320px) {
            .sabaClick_advert__wrapper{
                display:block;
            }
            .sabaClick_advert__inner{
                max-width: 90%;
                margin: 0 5%;
            }
        }
        */

    </style>








<div align="right"><font size="3" style>به نام خدا<br><br>با  سلام خدمت دوستان خوبم. امیدوارم همگی خوب و خوش و سلامت باشید<br><br>&nbsp;در این جلسه در مورد كاربرد PWM در ساخت یك ربات مسیریاب حرفه‌ای توضیح می‌دهیم.<br><br>در ربات‌های مسیریاب ساده كه در جلسات قبل نیز در مورد آن توضیح دادیم، هنوز میكروكنترلر وارد ربات ما نشده و تصمیصماتی كه ربات ما برای یافتن خط می‌گیرید بسیار مقدماتی هستند و ربات نمی‌تواند مسیر‌های پیچیده را با سرعت مناسبی دنبال كند.<br><br>یكی از مهمترین فواید استفاده از میكروكنترلر در ساخت ربات‌های مسیریاب، استفاده از قابلیت PWM برای هدایت موتور‌های ربات است. اما به چه صورت از PWM استفاده می‌كنیم؟<br><br><img hspace="0" border="0" vspace="0" src="http://roshd.ir/Portals/0/0and1/Robotic2/سنسورها%20وسط.GIF" alt=""><br><br><br><br><br><br>به شكل بالا نگاه كنید، در جلسه‌ی نوزدهم گفتیم  3 سنسور هر طرف را با همدیگر  ANDمنطقی می‌كنیم و اگر هر یك از این 3 سنسور خط را تشخیص داد، موتور همان سمت را متوقف می‌كنیم تا به این ترتیب ربات خط را  تعقیب كند.<br><br><br>اما در ربات‌های مسیریاب میكروكنترلر دار، ما می‌توانیم برای هر سنسور، به طور مجزا دستوری به موتور بدهیم. برای درك این موضوع مجدد به شكل بالا نگاه كنید، این نمای كلی یك ربات از زیر است. سنسور‌های آن را به ترتیب از چپ به راست، از 7 تا 1 شماره گذاری می‌كنیم.<br>همانطور كه به خاط دارید در ربات‌های بدون میكروكنترلر، تفاوتی نداشت كه سنسور 1 یا 2 یا 3 كدامیك خط را بیابند، هر كدام خط را تشخیص می‌داد، موتور سمت چپ خاموش می‌شد. اما در ربات‌های میكروكنترلر دار، ما می‌توانیم تعیین كنیم كه مثلاً اگر سنسور شماره‌ی 3 خط را دید، موتور سمت چپ به طور كامل متوقف نشود، بلكه سرعت آن به نصف كاهش پیدا كند. این كار به نظر هم منطقی می‌رسد، زیرا سنسور شماره‌ی 3 و 5 تا خط فاصله‌ی كمی دارند و نیاز نیست وقتی خط را تشخیص می‌دهند به طور كامل موتور متوقف شود، بلكه فقط كافیست سرعت موتور كمی كاهش پیدا كند تا ربات به تدریج به روی خط باز گردد. این عمل باعث می‌شود حركت ربات نرم‌تر و دقیق‌تر بشود و در مجموع سرعت ربات بالاتر برود.<br>حال اگر سنسور شماره‌ی 2 خط را ببیند، یعنی شرایط كمی خطرناك‌تر شده و ربات ممكن است از خط خارج شود، پس می‌توانیم در اینجا به موتور دستور توقف كامل را بدهیم تا ربات با سرعت بیشتری به مسیر مسابقه بازگردد. و در نهایت اگر سنسور شماره‌ی 1 خط را ببیند، یعنی ربات در آستانه‌ی خروج از مسیر مسابقه قرار گرفته است و باید با حداكثر توان ربات را به مسیر مسابقه بازگرداند. برای این كار به موتور سمت چپ دستور باز گشت به عقب را می‌دهیم. این كار بیشترین سرعت ممكن برای چرخش ربات را فراهم می‌سازد و ربات با سرعت زیادی به زمینه مسابقه باز می‌گردد.<br><br>در زیر بخشی از برنامه‌ی یك ربات مسیریاب پیشرفته، كه فقط برای سنسور‌های سمت چپ و طبق توضیحات بالا نوشته شده است را می‌بینید. همانطور كه می‌دانید ما نیاز به 3 پایه به عنوان ورودی برای دریافت وضعیت سنسورهای سمت چپ، و یك پایه‌ی خروجی و یك PWM برای كنترل موتور سمت چپ داریم كه به ترتیب زیر هستند:<br>PA.0 برای سنسور شماره‌ی 1<br>PA.1 برای سنسور شماره‌ی 2<br>PA.2 برای سنسور شماره‌ی 3<br>PD.6 و OCR2 برای كنترل موتور چپ<br>PD.3 و OCR1BL برای كنترل موتور راست<br><br>حالا به برنامه دقت كنید:<br><br><br><br><br>(if (PINA.0==0<br>}<br>  ; PORTD.6=0<br>   ; OCR2=127<br><br>  ; PORTD.3=0<br>   ; OCR1BL=255<br>{<br><br><br>(if (PINA.1==0<br>}<br>  ; PORTD.6=0<br>   ; OCR2=0<br><br>  ; PORTD.3=0<br>   ; OCR1BL=255<br>{<br><br><br>(if (PINA.2==0<br>}<br>  ; PORTD.6=1<br>   ; OCR2=0<br><br>  ; PORTD.3=0<br>   ; OCR1BL=255<br>{<br><br><br><br><br><br>به همین منوال باید برای سنسور‌های سمت راست هم برنامه را ادامه دهید. دقت كنید كه باید حتماً قبل از نوشتن برنامه، از داخل CodeWizard، تنظیمات اولیه را انجام دهید.<br><br>در مورد سنسور وسط هم در جلسه‌ی بیستم توضیحاتی داده شد، اگر این سنسور  خط را تشخیص دهد، بیانگر این است كه ربات در وضعیت مناسبی نسبت به خط قرار دارد و هر 2 موتور با تمام توان به سمت جلو حركت می‌كنند. اگر  پایه‌ی PA.3 را نیز به سنسور وسط اختصاص دهیم، برای این سنسور نیز داریم:<br><br><br>(if (PINA.3==0<br>}<br>;PORTD.6=0<br>   ; OCR2=255<br><br>  ; PORTD.3=0<br>   ; OCR1BL=255<br>{ <br><br>منتظر سوالات و نظرات دوستان خوبم هستم<br>تا جلسه‌ی آینده خدا نگه دار</font><br><br>


</div>



<script>
//    setTimeout(function () {
//        GetMihanBlogShowAds();
//    }, 1000);
</script>
<!--NEW SERVER--><!--;)-->

<!--SabaVision Ads Handler--><!--<script type="text/javascript">(function (d) {var url =   location.protocol+'//api.sabavision.com/pox/poxjs.js';d.write('<script type="text/javascript" src="' + url + '" async></scri' + 'pt>');})(document);</script>-->


<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-153829-9']);
    _gaq.push(['_setDomainName', 'r0b0tic.mihanblog.com']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script>


<div id='mediaad-Kvcm'></div>
<meta name="sabavision_zone" content="2500-Z499" />
<center>
    <div style="background-color:white;width:90%;padding:20px;margin-top:50px;margin-bottom:50px;">
        <a href="https://www.cloob.com">شبکه اجتماعی فارسی کلوب</a> | <a href="https://www.seo25.com/product/buy-mobile-traffic-and-get-cheap-targeted-mobile-traffic/" target="_blank">Buy Mobile Traffic</a> | <a href="https://www.soalaat.com">سایت سوالات</a>
    </div>
</center>
