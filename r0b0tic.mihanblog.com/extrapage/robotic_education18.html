
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc@rsd" />
<script type="text/javascript" src="../../static.mihanblog.com/public/scripts/run/g.other.v3.js"></script>
<script>

	function c_$(id){
        return document.getElementById(id);
    }
    
			//if (parent.frames.length) top.location.href= document.location;
		
	setTodayDate = function(){
		document.write('شنبه 22 آذر 1399');
		/*354406*/	}

</script>



        <script type="text/javascript">
            (function(){
            var now = new Date();
            var head = document.getElementsByTagName('head')[0];
            var script = document.createElement('script');
            script.async = true;
            var script_address = 'https://cdn.yektanet.com/js/mihanblog.com/native-mihanblog.com-6531.js';
            script.src = script_address + '?v=' + now.getFullYear().toString() + '0' + now.getMonth() + '0' + now.getDate() + '0' + now.getHours();
            head.appendChild(script);
            })();
        </script>

        <!--<script type="text/javascript">
            var head = document.getElementsByTagName("head")[0];
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.async=1;
            script.src = "https://s1.mediaad.org/serve/mihanblog.com/loader.js" ;
            head.appendChild(script);
        </script>-->
        
        <script>
            var sabaVisionWebsiteID = "9bab9dac-041d-4bdb-b39a-1ed789f65eed"; var sabaVisionWebsitePage = "ALL"
        </script>
        <link rel="stylesheet" href="https://plus.sabavision.com/dox/dox.min.css">
        <script src="https://plus.sabavision.com/dox/dox.min.js"></script>
        
        <script>
	try{
		var commentCnt = new Array();
			} catch(e){}
	
	newComment = function(post_id){
		try{
			window.open('/post/comment/'+post_id,'comment','status=yes,scrollbars=yes,toolbar=no,menubar=no,location=no ,width=480px,height=540px');
		} catch(e){}
	}
	setCommentCnt = function(post_id){
		try{
			if(commentCnt[post_id]){
				document.write(commentCnt[post_id]);
			} else {
				document.write(0);
			}
		} catch(e){}
	}
</script><script>

	statInfo = new Array();
	setStatVar = function(index,value){
		statInfo[index] = value;
	}
	getStatVar = function(index){
		if(statInfo[index]) document.write(statInfo[index]);
	}
	
	setStatVar('total_post','245');
	setStatVar('total_author','2');
	setStatVar('modify_date','دوشنبه 4 آذر 1392');
	
	setStatVar('today_view','31');
	setStatVar('yesterday_view','56');
	
	setStatVar('this_month_view','1352');
	setStatVar('last_month_view','3293');

	setStatVar('total_view','916055');
	setStatVar('last_view_date','شنبه 22 آذر 1399 (14:50)');



    
</script><script>
	messageForm = function(post_id){
		try{
			window.open('/message','message','status=yes,scrollbars=yes,toolbar=no,menubar=no,location=no ,width=480px,height=550px');
		} catch(e){}
	}
</script><script>
	linkdailyForm = function(){
		try{
			window.open('/linkdaily/new','linkdaily','status=yes,scrollbars=yes,toolbar=no,menubar=no,location=no ,width=500px,height=460px');
		} catch(e){}
	}
</script><script>

var MihanblogShopAdsArray = new Array();

function GetMihanBlogShowAds(){
	if(MihanblogShopAdsArray.length){
		var adsTarget = 'MihanblogShopAds';
		var containerWidth = document.getElementById(adsTarget).offsetWidth;
		if(containerWidth>=200){
			var adsCnt = parseInt(containerWidth / 200) ;
			if(adsCnt>MihanblogShopAdsArray.length){
				adsCnt = MihanblogShopAdsArray.length ; 
			}
//			var OneAdsWidth = parseInt(containerWidth / adsCnt) ;
			var OneAdsWidth = containerWidth / adsCnt ;
			if(OneAdsWidth>400){
				OneAdsWidth = 400 ;
			}
			var OutHtml = '';
			var img = '';
			var link = '';
			var title = '';
			var description = '';
			var imgWidth = 70;
			if(OneAdsWidth>230){
				imgWidth = 80;
			}
			if(OneAdsWidth>300){
				imgWidth = 90;
			}
			for(adsOne=0;adsOne<adsCnt;adsOne++){
				
				img = MihanblogShopAdsArray[adsOne]['img'];
				link = MihanblogShopAdsArray[adsOne]['link'];
				title = MihanblogShopAdsArray[adsOne]['title'];
				description = MihanblogShopAdsArray[adsOne]['description'];
				
				OutHtml += '<td style="background-color:#FFF;width: '+OneAdsWidth+'px;border:1px solid #f00;margin:0px 0px;font-size:11px;font-family:tahoma;padding:2px;margin:0px 0px;font-size:11px;border: 1px solid BurlyWood; padding: 1px; height: '+(imgWidth+25)+'px;">';

				OutHtml += '	<a href="http://r0b0tic.mihanblog.com/extrapage/'+link+'" target="_blank" style="text-decoration:none">';

				OutHtml += '			<div style="width: '+(OneAdsWidth-16)+'px;cursor:pointer;font-size:12px;padding: 4px 1px 4px 7px; white-space: nowrap; text-align: center; font-weight: bold; color: blue;white-space:nowrap;overflow:hidden">';
				OutHtml += 					title;
				OutHtml += '			</div>';
				OutHtml += '			<div style="cursor:pointer;padding: 1px; display: block; float: right; width: '+imgWidth+'px;">';
				OutHtml += '				<img src="'+img+'.html" style="border:0px;padding:0px;margin:0px;width:'+imgWidth+'px;height:'+imgWidth+'px;">';
				OutHtml += '			</div>';
				OutHtml += '			<div style="padding: 1px; display: block; float: right; width: '+(OneAdsWidth-13-imgWidth)+'px; text-align: right;overflow:hidden">';
				OutHtml += '				<div style="overflow:hidden;cursor:pointer;padding: 2px 3px; line-height: 17px; height: '+(imgWidth-3)+'px; text-align: justify;color:#000;direction:rtl">';
				OutHtml += 						description;
				OutHtml += '				</div>';
				OutHtml += '			</div>';

				OutHtml += '	</a>';

				OutHtml += '</td>';
			}
			
			var Out = '<table align="center" cellpadding="0" cellspacing="2" style="width:'+(OneAdsWidth*adsCnt)+'px;"><tr>'+OutHtml+'</tr></table>'; 
			
			Out = '<div style="text-align:center;padding:0px;margin:3px auto;">'+Out+'</div>'; 
			
			document.getElementById(adsTarget).style.height = (imgWidth+35)+'px' ;
			document.getElementById(adsTarget).innerHTML = Out ;
		}
	}
}
</script>
    <style>
        @font-face {
            font-family: 'Mihan-Iransans';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-IransansBold';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-Black.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-IransansLight';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Iransans-UltraLight.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-Nassim';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Nassim.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-Koodak';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Koodak.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Mihan-Yekan';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/Yekan.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'FontAwesome';
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.eot');
            src: url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.eot?') format('embedded-opentype'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.woff2') format('woff2'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.woff') format('woff'),
            url('http://r0b0tic.mihanblog.com/public/public/fonts/fontawesome_webfont.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }


        

        /* Smartphones (portrait and landscape) ----------- */

        /*
        @media only screen and (max-width : 480px) and (min-width : 320px) {
            .sabaClick_advert__wrapper{
                display:block;
            }
            .sabaClick_advert__inner{
                max-width: 90%;
                margin: 0 5%;
            }
        }
        */

    </style>







<p style="TEXT-ALIGN: center" dir="rtl" align="right"><font size="3">به نام خدا</font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">در جلسه ی گذشته در مورد ساختار ADC یا همان مبدل آنالوگ به دیجیتال توضیحات مفصل داده شد. در این جلسه، نحوه ی استفاده از ADC در برنامه را توضیح خواهیم داد.</font><font size="3"><br></font><font size="3">در میکرو کنترلر ATMEGA16، 8 پایه ی به ADC اختصاص داده شده، یعنی شما می توانید به صورت همزمان، خروجیِ 8 سنسور یا مدار جانبی را به میکروکنترلر خود وصل کنید و اطلاعات آن ها را به وسیله ی ADC دریافت کنید.</font><font size="3"><br></font><font size="3"><br></font><font size="3">
</font><div><font size="3">
</font><table style="WIDTH: 80%" bgcolor="#00ff00"><font size="3">
</font><tbody><font size="3">
</font><tr><font size="3">
</font><td><font size="3">اما این 8 پایه کدام پایه ها هستند؟ </font></td></tr></tbody></table></div><font size="3">
</p></font><p align="right"><font size="3"><br></font></p><p dir="rtl" align="right"><p><font size="3">این 8 پایه، پایه مربوط به پورت A هستند که با فعال کردن ADC در CodeWizard، این پایه ها در اختیار ADC قرار می گیرند. دقت کنید که برای استفده از ADC حتماً باید قبلاً تنظیمات را در CodeWizard انجام داده باشید.</font><font size="3"><br></font><font size="3">این 8 پایه طبق شکل زیر از ADC0 تا ADC7 نام گذاری شده اند.</font><font size="3"><br></font></p></p><div align="right"><font size="3">
</font><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><img style="WIDTH: 397px; HEIGHT: 424px" alt="" src="http://roshd.ir/Portals/0/0and1/Robotic2/ATMEGA16_pinouts.GIF"><font size="3"><br></font><font size="3"><br></font><font size="3">
</font><div><font size="3">
</font><table style="WIDTH: 80%" bgcolor="#ffff00"><font size="3">
</font><tbody><font size="3">
</font><tr><font size="3">
</font><td><font size="3">چگونه از ADC در برنامه استفاده کنیم؟</font></td></tr></tbody></table></div><font size="3">
</p></font><p align="right"><font size="3"><br></font></p><p dir="rtl" align="right"><p><font size="3">هنگامیکه شما تنظیمات اولیه را برای فعال سازی ADC در CodeWizard انجام می دهید، به شما این امکان داده می شود که در هر قسمت از برنامه، مقدار هر یک از 8 ADC را بخوانید و از آن استفاده کنید. عبارت" (شماره ی ADC )read_adc " در هر قسمت از برنامه، حاوی مقدار ADC مورد نظر شماست. مثلاً اگر بخواهیم مقدار ADC0 را بررسی كنیم كه آیا از 100 بزرگتر است یا خیر، به شكل زیر عمل می‌كنیم:</font><font size="3"> </font></p></p><div align="right"><font size="3">
</font><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" align="right"><font size="3">if(read_adc(0) &gt; 100)</font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">یا مثلاً اگر بخواهیم مقدار ADC1 را در داخل یك متغیر نگه داری كنیم، به شكل زیر عمل می كنیم:</font></p><div align="right"><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" align="right"><font size="3">int a;</font><font size="3"><br></font><font size="3">a= read_adc(1);</font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">مبدل آنالوگ به دیجیتال، یكی از مهمترین قابلیت‌هایست كه اكثر میكروكنترلر‌های خانواده‌ی AVR آن را دارند. در میكروكنترلر‌های قدیمی‌تر، برای این كار، باید یك آی سی به صورت جداگانه بر روی مدار تعبیه می‌شد.</font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">در جلسه‌ی آینده مبحث بسیار مهم PWM را شروع خواهیم كرد. به وسیله‌ی این قابلیت بسیار مهم،‌ما می‌توانیم سرعت موتور‌ها یا هر المان دیگری كه به میكروكنترلر متصل می‌شود را كنترل كنیم. PWM نیز یكی از قابلیت‌های مهم خانواده‌ی AVR است كه در&nbsp;ادامه به آن&nbsp;خواهیم پرداخت.</font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">
</font><table style="WIDTH: 550px" bgcolor="#ffc0cb"><font size="3">
</font><tbody><font size="3">
</font><tr><font size="3">
</font><td><font color="#8b0000"><font size="3">PWM</font><font size="3"> چیست؟</font></font></td></tr></tbody></table><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3"><br></font><font color="#000080"><font size="3"><br></font><font size="3"><br></font><font size="3">در بسیاری از موارد، ما نیاز به كنترل ولتاژ بر روی پایه‌های خروجی میكروكنترلر را داریم. مثلاً اگر بخواهیم سرعت موتور را كنترل كنیم، باید ولتاژی كه بر روی موتور اعمال می‌شود را كنترل كرد. در حقیقت سرعت موتور تقریباًً تابع مستقیمی از ولتاژی است كه بر روی آن اعمال می‌شود. یعنی اگر ولتاژ كاریِ موتوری (ولتاژ استاندارد برای فعال سازی موتور كه بر روی بدنه‌ی آن نوشته می‌شود) 12 ولت باشد، با اعمال ولتاژ 6 ولت روی آن، می‌توانید سرعت چرخش آن(rpm) را حدوداً به نصف كاهش دهید.</font></font><font size="3"> </font></p><div align="right"><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">كنترل </font><font size="3">سرعت</font><font size="3"> ربات، در همه‌ی سطوح رباتیك اهمیت بسیار زیادی دارد، از ربات‌های مسیریاب ساده گرفته تا ربات‌های فوتبالیست. ما تا كنون یاد گرفته‌ایم كه چگونه می‌توان به موتور دستور حركت یا توقف داد، اما راهی برای كنترل سرعت موتور یاد نگرفته‌ایم. </font><font size="3"></p><br></font><div align="right"><font size="3">
</font><font color="#000080"><font size="3">
</font><p dir="rtl" align="right"><font size="3"><br></font></p><font size="3">
</font><p dir="rtl" align="right"><font size="3">
</font><table style="WIDTH: 550px" bgcolor="#ffe4e1" align="center"><font size="3">
</font><tbody><font size="3">
</font><tr><font size="3">
</font><td><font color="#8b0000"><font size="3">یادآوری</font><font size="3"><br></font><font size="3"><br></font></font><font size="3">همانطور كه می‌دانید سطح ولتاژ پایه‌های خروجی میكروكنترلر منطقی است، یعنی یك پایه‌ای كه برای كنترل موتور ربات استفاده می‌شود فقط می‌تواند </font><u><font size="3">0</font></u><font size="3"> یا </font><u><font size="3">1</font></u><font size="3"> باشد. ما 2 پایه از میكروكنترلر را به حركت ربات اختصاص می‌دهیم، برای صدور دستور حركت، باید یك پایه را </font><u><font size="3">0</font></u><font size="3"> و پایه‌ی دیگر را </font><u><font size="3">1</font></u><font size="3"> كنیم، در این حالت بین 2 پایه‌ی موتور اختلاف پتانسیل برقرار می‌شود و حركت می‌كند. اگر هم بخواهیم موتور معكوس بچرخد، باید پایه‌ای كه </font><u><font size="3">1</font></u><font size="3"> بود </font><u><font size="3">0</font></u><font size="3"> ، و پایه‌ای كه </font><u><font size="3">0</font></u><font size="3"> بود را </font><u><font size="3">1</font></u><font size="3"> كنیم؛ و برای توقف موتور، باید هر دو پایه را </font><u><font size="3">0</font></u><font size="3"> یا هر دو پایه را </font><u><font size="3">1</font></u><font size="3"> كنیم (تا بین 2 پایه‌ی موتور اختلاف پتانسیل 0 ولت باشد). در نتیجه در حالت عادی ما فقط 2 فرمان "حركت" و "توقف" را می‌توانیم به موتورها بدهیم، و ما هیچ كنترلی بر روی </font><font size="3">سرعت</font><font size="3"> موتور نداریم.</font></td></tr></tbody></table><font size="3">
</font><p dir="rtl" align="right"><font size="3"><br></font><font size="3"><br></font><font size="3"><br></font></p></font><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">PWM تكنیكی است كه به كمك آن می‌توانیم ولتاژ پایه‌های خروجی میكروكنترلر، و در نتیجه سرعت موتور یا سایر قطعات جانبی كه به میكروكنترلر متصل می‌شود را كنترل كنیم.</font><font size="3"></p><br></font><div align="right"><font size="3">
</font><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><font size="3"><br></font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">
</font><table style="WIDTH: 550px" bgcolor="#ffc0cb"><font size="3">
</font><tbody><font size="3">
</font><tr><font size="3">
</font><td><font size="3">PWM</font></td></tr></tbody></table><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3"><br></font><font color="#000080"><font size="3"><br></font><font size="3"><br></font><font size="3">PWM مخفف واژه‌ی Pulse Width Modulation و به معنای "مدولاسیون پهنای پالس" است. همانطور كه گفتیم PWM تكنیكی برای كنترل ولتاژِ پایه‌ی خروجی است. حال ببینیم چگونه با این تكنیك می‌توان ولتاژ خروجی را كنترل كرد.</font></font><font size="3"> </font></p><div align="right"><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">می‌دانیم كه ولتاژ در پایه‌های خروجی میكروكنترلر یا 0 است یا 5 ولت، اما برای كنترل </font><font size="3">سرعت</font><font size="3"> موتور، باید بتوانیم حداقل ولتاژ یكی از پایه‌ها را بین 0 تا 5 تغییر دهیم. PWM روشی است تا ما بتوانیم با استفاده از همین پایه‌ی خروجی معمولی، به نوعی ولتاژ را بین 0 تا 5 ولت تغییر دهیم.</font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">در این روش، ما با سرعت بالایی سطح ولتاژ خروجی را </font><u><font size="3">0</font></u><font size="3"> و بلافاصله </font><u><font size="3">1</font></u><font size="3"> می‌كنیم(مثلاً هزار بار در ثانیه)، نمودار ولتاژ خروجی بر حسب زمان به شكل زیر می‌شود.</font><font size="3"></p><br></font><div align="right"><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><img alt="" src="http://roshd.ir/Portals/0/0and1/Robotic2/50preH.jpg"></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3"><br></font><font size="3">نمودار بالا ولتاژ خروجی این پایه بر حسب زمان است. </font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">در شكل بالا جمع 2 بازه‌ای كه با فلش‌های 2طرفه نشان داده شده است، (به عنوان مثال) 10 میكرو ثانیه است. كه 5میكرو ثانیه خروجی </font><u><font size="3">1</font></u><font size="3"> و سپس 5میكرو ثانیه </font><u><font size="3">0</font></u><font size="3"> می‌شود. اما همانطور كه گفته شد، این عمل هزاران بار در ثانیه تكرار می‌شود، اما آیا موتور نیز به همین تعداد در ثانیه روشن و خاموش می‌شود؟</font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">جواب منفیست، اتفاقی كه روی می‌دهد این است كه موتور، این موج را در درون خود به نوعی میانگین گیری می‌كند و در حقیقت آنرا به شكل زیر می بیند:</font><font size="3"></p><br></font><div align="right"><font size="3">
</font><font color="#000080"><font size="3">
</font><p dir="rtl" align="right"><font size="3"><br></font></p></font><font size="3">
</font></div><p dir="rtl" align="right"><img alt="" src="http://roshd.ir/Portals/0/0and1/Robotic2/AVE-50preH.jpg"></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3"><br></font><font size="3">یعنی در واقع موتور این موج را به صورت یك ولتاژ 2.5 ولت معمولی دریافت می‌كند. </font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">به همین ترتیب می‌توان هر ولتاژی بین 0 تا 5 ولت را بر روی خروجی‌ مورد نظر ایجاد كرد. اگر بخواهیم ولتاژی بالاتر از 2.5 ولت داشته باشیم، باید طول بازه‌های زمانی‌ای كه خروجی </font><u><font size="3">1</font></u><font size="3"> است را نسبت به بازه‌هایی كه خروجی </font><u><font size="3">0</font></u><font size="3"> است بیشتر كنیم. به عنوان مثال برای ایجاد ولتاژ 2.5 ولت، باید 5 میكرو ثانیه سطح ولتاژ خروجی </font><u><font size="3">1</font></u><font size="3"> باشد، سپس 5 میكرو ثانیه سطح ولتاژ </font><u><font size="3">0</font></u><font size="3"> شود تا موجی به شكل بالا ایجاد شود.</font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">یا به عنوان مثالی دیگر، اگر بخواهیم در خروجی ولتاژ 4 ولت داشته باشیم، باید باید 8 میكرو ثانیه سطح ولتاژ خروجی </font><u><font size="3">1</font></u><font size="3"> باشد، سپس 2 میكرو ثانیه سطح ولتاژ </font><u><font size="3">0</font></u><font size="3"> شود، تا ولتاژ پایه‌ی خروجی مورد نظر 4 ولت باشد.</font><font size="3"><br></font><font size="3"><br></font><font size="3">در حقیقت ولتاژ خروجی از رابطه‌ی ساده‌ی زیر به دست می‌اید:</font></p><div align="right"><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" dir="ltr" align="right"><font size="3">(طول&nbsp;كل بازه)&nbsp;&nbsp;/ ( طول بازه‌ای كه خروجی </font><u><font size="3">1</font></u><font size="3"> است) </font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">پس طبق رابطه‌ی بالا،برای ایجاد ولتاژ 4 ولت، می‌توان به جای استفاده از بازه‌های 8 و 2 میكرو ثانیه‌ای، از بازه‌های 4 و 1 میكرو‌ ثانیه‌ای استفاده كرد. (یعنی 4میكرو ثانیه 5ولت، 1 میكرو ثانیه 0 ولت) زیرا:&nbsp;&nbsp; </font><font size="3">2÷ 8 = 1÷4</font></p><div align="right"><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><font size="3"><br></font><font size="3">نمودار ولتاژ‌های 4 ولت و 1 ولت در زیر نشان داده شده است:</font><font size="3"><br></font></p><div align="right"><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">
</font><table><font size="3">
</font><tbody><font size="3">
</font><tr><font size="3">
</font><td><img style="WIDTH: 300px; HEIGHT: 106px" alt="" src="http://roshd.ir/Portals/0/0and1/Robotic2/80preH.jpg"></td><font size="3">
</font><td><img style="WIDTH: 300px; HEIGHT: 122px" alt="" src="http://roshd.ir/Portals/0/0and1/Robotic2/20preH.jpg"></td></tr><font size="3">
</font><tr><font size="3">
</font><td><font size="3">
</font><p align="center"><font size="3">نمودار نحوه‌ی تولید ولتاژ 4 ولت با تكنیك PWM. </font></p></td><font size="3">
</font><td><font size="3">
</font><p align="center"><font size="3">نمودار نحوه‌ی تولید ولتاژ 1 ولت با تكنیك PWM.</font></p></td></tr></tbody></table><font size="3">
</font><div align="right"><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><font size="3"><br></font><font size="3">حال ببینیم چگونه می‌توان برنامه‌ای نوشت تا بر روی پایه‌ای دلخواه از میكروكنترلر PWM ی برای ولتاژ 4 ولت ایجاد كرد.</font><font size="3"><br></font><font size="3">هر دستوری كه بر روی خروجی‌های میكروكنترلر قرار می‌گیرد، تا زمانی كه دستور بعدی، خروجی را تغییر ندهد، آن خروجی تغییری نخواهد كرد. یعنی مثلاً زمانی كه پایه‌ای را </font><u><font size="3">1</font></u><font size="3"> می‌كنیم، تا زمانیكه با دستور دیگری آن پایه را </font><u><font size="3">0</font></u><font size="3"> كنیم، مقدار خروجی آن پایه‌ </font><u><font size="3">1</font></u><font size="3"> خواهد ماند. به این عمل اصطلاحاً Latch كردن می‌گویند. میكروكنترلر همواره اطلاعاتی كه بر روی خروجی قرار می‌دهد را Latch می‌كند و تا زمانیكه اطلاعات جدید بر روی پایه قرار نگیرد، اطلاعات قبلی را تغییر نمی‌دهد.</font><font size="3"><br></font><font size="3">در نتیجه، مثلاً اگر می‌خواهیم پایه‌ای را 5 میكروثانیه </font><u><font size="3">1</font></u><font size="3"> وسپس </font><u><font size="3">0</font></u><font size="3"> كنیم، كافیست پایه‌ی مورد نظر را </font><u><font size="3">1</font></u><font size="3"> كنیم و 5میلی ثانیه در برنامه تاخیر ایجاد كنیم و سپس پایه‌ی مورد نظر را </font><u><font size="3">0</font></u><font size="3"> كنیم.</font><font size="3"><br></font><font size="3">پس وقتی می خواهیم مثلاَ بر روی پایه‌ی B.4 ، یك PWM برای ولتاژ 2.5 ولت ایجاد كنیم، باید به شكل زیر عمل كنیم.</font></p><div align="right"><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" dir="ltr" align="right"><font size="3">while(1)</font></p><div align="right"><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" dir="ltr" align="right"><font size="3">{</font></p><div align="right"><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" dir="ltr" align="right"><font size="3">PORTB.4=1;</font></p><div align="right"><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" dir="ltr" align="right"><font size="3">5 میكرو ثانیه تاخیر</font></p><div align="right"><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" dir="ltr" align="right"><font size="3">PORTB.4=0;</font></p><div align="right"><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" dir="ltr" align="right"><font size="3">5 میكرو ثانیه تاخیر</font></p><div align="right"><font size="3">
</font></div><p style="TEXT-ALIGN: left; unicode-bidi: embed; DIRECTION: ltr" dir="ltr" align="right"><font size="3">}</font></p><div align="right"><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">در بالا یك حلقه‌ی بی‌نهایت تعریف شده است كه بر روی پایه‌یB.4،&nbsp;یك PWM برای 2.5&nbsp;ولت ایجاد می‌كند.</font><font size="3"><br></font><font size="3"><br></font><font size="3">در جلسه‌ی آینده با توابعی كه برای ایجاد تاخیر (delay) در برنامه استفاده می‌شوند آشنا خواهید شد. همچنین می‌آموزید كه چگونه می‌توان از PWM میكروكنترلر‌های خانواده‌ی AVR استفاده كنید.</font></p><div align="right"><font size="3">
</font><font size="3">
</font></div><p dir="rtl" align="right"><font size="3">اگر مطالب این جلسه كمی پیچیده به نظر می‌رسند جای نگرانی نیست، زیرا مبحث PWM مبحث گسترده‌ایست و كاربرد‌های زیادی در صنعت دارد و فقط محدود به میكروكنترلر هم نمی‌شود. پس طبیعیست كه سطح مطالب كمی بالا باشد و دوستان نیز گاهاً در درك مفاهیم دچار مشكل شوند. پس دوستان عزیز اگر سوال یا مطلب خاصی در این رابطه دارند حتماً با ما در میان بگذارند.</font></p><b>

</b><script>
//    setTimeout(function () {
//        GetMihanBlogShowAds();
//    }, 1000);
</script>
<!--NEW SERVER--><!--;)-->

<!--SabaVision Ads Handler--><!--<script type="text/javascript">(function (d) {var url =   location.protocol+'//api.sabavision.com/pox/poxjs.js';d.write('<script type="text/javascript" src="' + url + '" async></scri' + 'pt>');})(document);</script>-->


<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-153829-9']);
    _gaq.push(['_setDomainName', 'r0b0tic.mihanblog.com']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script>


<div id='mediaad-Kvcm'></div>
<meta name="sabavision_zone" content="2500-Z499" />
<center>
    <div style="background-color:white;width:90%;padding:20px;margin-top:50px;margin-bottom:50px;">
        <a href="https://www.cloob.com">شبکه اجتماعی فارسی کلوب</a> | <a href="https://www.seo25.com/product/buy-mobile-traffic-and-get-cheap-targeted-mobile-traffic/" target="_blank">Buy Mobile Traffic</a> | <a href="https://www.soalaat.com">سایت سوالات</a>
    </div>
</center>
